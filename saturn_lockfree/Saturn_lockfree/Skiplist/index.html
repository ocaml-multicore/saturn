<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Skiplist (saturn_lockfree.Saturn_lockfree.Skiplist)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">saturn_lockfree</a> &#x00BB; <a href="../index.html">Saturn_lockfree</a> &#x00BB; Skiplist</nav><header class="odoc-preamble"><h1>Module <code><span>Saturn_lockfree.Skiplist</span></code></h1><p>A lock-free skiplist.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>(!'k, !'v) t</span></span></code></div><div class="spec-doc"><p>The type of a lock-free skiplist containing bindings of keys of type <code>'k</code> to values of type <code>'v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span class="optlabel">?max_height</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ~compare ()</code> creates a new empty skiplist where keys are ordered based on the given <code>compare</code> function.</p><p>Note that the polymorphic <code>Stdlib.compare</code> function has relatively high overhead and it is usually better to use a type specific <code>compare</code> function such as <code>Int.compare</code> or <code>String.compare</code>.</p><p>The optional <code>max_height</code> argument determines the maximum height of nodes in the skiplist and directly affects the performance of the skiplist. The current implementation does not adjust height automatically.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_height_of"><a href="#val-max_height_of" class="anchor"></a><code><span><span class="keyword">val</span> max_height_of : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>max_height_of s</code> returns the maximum height of nodes of the skiplist <code>s</code> as specified to <a href="#val-create"><code>create</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_opt"><a href="#val-find_opt" class="anchor"></a><code><span><span class="keyword">val</span> find_opt : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> option</span></span></code></div><div class="spec-doc"><p><code>find_opt s k</code> tries to find a binding of <code>k</code> to <code>v</code> from the skiplist <code>s</code> and returns <code>Some v</code> in case such a binding was found or return <code>None</code> in case no such binding was found.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>mem s k</code> determines whether the skiplist <code>s</code> contained a binding of <code>k</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_add"><a href="#val-try_add" class="anchor"></a><code><span><span class="keyword">val</span> try_add : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_add s k v</code> tries to add a new binding of <code>k</code> to <code>v</code> into the skiplist <code>s</code> and returns <code>true</code> on success. Otherwise the skiplist already contained a binding of <code>k</code> and <code>false</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_remove"><a href="#val-try_remove" class="anchor"></a><code><span><span class="keyword">val</span> try_remove : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_remove s k</code> tries to remove a binding of <code>k</code> from the skiplist and returns <code>true</code> on success. Otherwise the skiplist did not contain a binding of <code>k</code> and <code>false</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>length s</code> computes the number of bindings in the skiplist <code>s</code>.</p></div></div></div></body></html>
