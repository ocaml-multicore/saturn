<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Single_prod_single_cons_queue_unsafe (saturn_lockfree.Saturn_lockfree.Single_prod_single_cons_queue_unsafe)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">saturn_lockfree</a> &#x00BB; <a href="../index.html">Saturn_lockfree</a> &#x00BB; Single_prod_single_cons_queue_unsafe</nav><header class="odoc-preamble"><h1>Module <code><span>Saturn_lockfree.Single_prod_single_cons_queue_unsafe</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#producer-functions">Producer functions</a><ul><li><a href="#consumer-functions">Consumer functions</a></li></ul></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>Type of single-producer single-consumer non-resizable domain-safe queue that works in FIFO order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span class="label">size_exponent</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ~size_exponent:int</code> returns a new queue of maximum size <code>2^size_exponent</code> and initially empty.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-size"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>size</code> returns the size of the queue. This method linearizes only when called from either consumer or producer domain. Otherwise, it is safe to call but provides only an *indication* of the size of the structure.</p></div></div><h2 id="producer-functions"><a href="#producer-functions" class="anchor"></a>Producer functions</h2><div class="odoc-spec"><div class="spec exception anchored" id="exception-Full"><a href="#exception-Full" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Full</span></span></code></div><div class="spec-doc"><p>Raised when <a href="#val-push_exn"><code>push_exn</code></a> is applied to a full queue.</p><p>This exception is meant to avoid allocations required by an option type. As such, it does not register backtrace information and it is recommended to use the following pattern to catch it.</p><pre class="language-ocaml"><code>match push_exn q v with
 | () -&gt; (* ... *)
 | exception Full -&gt; (* ... *)</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-push_exn"><a href="#val-push_exn" class="anchor"></a><code><span><span class="keyword">val</span> push_exn : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>push q v</code> adds the element <code>v</code> at the end of the queue <code>q</code>. This method can be used by at most one domain at a time.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-Full"><code>Full</code></a> <p>if the queue is full.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_push"><a href="#val-try_push" class="anchor"></a><code><span><span class="keyword">val</span> try_push : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_push q v</code> tries to add the element <code>v</code> at the end of the queue <code>q</code>. It fails it the queue <code>q</code> is full. This method can be used by at most one domain at a time.</p></div></div><h3 id="consumer-functions"><a href="#consumer-functions" class="anchor"></a>Consumer functions</h3><div class="odoc-spec"><div class="spec exception anchored" id="exception-Empty"><a href="#exception-Empty" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Empty</span></span></code></div><div class="spec-doc"><p>Raised when <a href="#val-pop_exn"><code>pop_exn</code></a> or <a href="#val-peek_exn"><code>peek_exn</code></a> is applied to an empty queue.</p><p>This exception is meant to avoid allocations required by an option type. As such, it does not register backtrace information and it is recommended to use the following pattern to catch it.</p><pre class="language-ocaml"><code>match pop_exn q with
 | value -&gt; (* ... *)
 | exception Empty -&gt; (* ... *)</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pop_exn"><a href="#val-pop_exn" class="anchor"></a><code><span><span class="keyword">val</span> pop_exn : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>pop_exn q</code> removes and returns the first element in queue <code>q</code>. This method can be used by at most one domain at a time.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-Empty"><code>Empty</code></a> <p>if <code>q</code> is empty.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pop_opt"><a href="#val-pop_opt" class="anchor"></a><code><span><span class="keyword">val</span> pop_opt : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>pop_opt q</code> removes and returns the first element in queue <code>q</code>, or returns <code>None</code> if the queue is empty. This method can be used by at most one domain at a time.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-peek_exn"><a href="#val-peek_exn" class="anchor"></a><code><span><span class="keyword">val</span> peek_exn : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>peek_exn q</code> returns the first element in queue <code>q</code>. This method can be used by at most one domain at a time.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-Empty"><code>Empty</code></a> <p>if <code>q</code> is empty.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-peek_opt"><a href="#val-peek_opt" class="anchor"></a><code><span><span class="keyword">val</span> peek_opt : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>peek_opt q</code> returns the first element in queue <code>q</code>, or <code>None</code> if the queue is empty. This method can be used by at most one domain at a time.</p></div></div></div></body></html>
